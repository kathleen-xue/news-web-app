(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),s=a(10),r=a.n(s),c=(a(98),a(99),a(15)),l=a(16),i=a(18),u=a(17),d=a(7),h=a(19),p=(a(100),a(77)),m=a.n(p),g=a(83),b=a(134),k=a(133),v=a(13),E=a(22),f=a(61),y=(a(119),a(84)),S=a.n(y),w=a(38);var P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={source:a.props.source,selectedPage:a.props.whichPage,checked:"guardian"===a.props.source,bookmark:"bookmark"===a.props.whichPage?o.a.createElement(E.a,null):o.a.createElement(E.b,null),bookmarkChecked:"bookmark"===a.props.whichPage,searchValue:null,searchDropdown:[],currentSearchValue:[],navbarExpanded:!1},a.updateNewsSource=a.updateNewsSource.bind(Object(d.a)(a)),a.updateWhichPage=a.updateWhichPage.bind(Object(d.a)(a)),a.styleLink=a.styleLink.bind(Object(d.a)(a)),a.toggleBookmark=a.toggleBookmark.bind(Object(d.a)(a)),a.autosuggest=a.autosuggest.bind(Object(d.a)(a)),a.handleSubmitSearch=a.handleSubmitSearch.bind(Object(d.a)(a)),a.handleSubmitSearchClick=a.handleSubmitSearchClick.bind(Object(d.a)(a)),a.renderSearchPage=a.renderSearchPage.bind(Object(d.a)(a)),a.autosuggestArray=a.autosuggestArray.bind(Object(d.a)(a)),a.timeout=a.timeout.bind(Object(d.a)(a)),a.renderToggleNewsSources=a.renderToggleNewsSources.bind(Object(d.a)(a)),a.toggleNavbarExpanded=a.toggleNavbarExpanded.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.source!==this.props.source&&this.setState({source:this.props.source,selectedPage:this.props.whichPage}),e.whichPage!==this.props.whichPage&&this.setState({selectedPage:this.props.whichPage})}},{key:"componentDidMount",value:function(){console.log("MOUNT",this.state.searchValue)}},{key:"toggleBookmark",value:function(){!1===this.state.bookmarkChecked?this.setState({bookmark:o.a.createElement(E.a,null),bookmarkChecked:!0,selectedPage:"bookmark",navbarExpanded:!1}):this.setState({bookmark:o.a.createElement(E.b,null),bookmarkChecked:!1,navbarExpanded:!1})}},{key:"autosuggestArray",value:function(e,t){var a=[];if(a.push({value:t,label:t}),e instanceof Array)return a;for(var n=0;n<e.suggestionGroups[0].searchSuggestions.length;n++)a.push({value:e.suggestionGroups[0].searchSuggestions[n].query,label:e.suggestionGroups[0].searchSuggestions[n].displayText});return a}},{key:"toggleNavbarExpanded",value:function(){this.setState({navbarExpanded:!this.state.navbarExpanded})}},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"autosuggest",value:function(){var e=Object(g.a)(m.a.mark((function e(t){var a,n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("autosuggest",t),e.next=3,this.setState({currentSearchValue:[{value:t,label:t}],searchValue:{value:t,label:t}});case 3:return a=this.autosuggestArray([],t),e.next=6,this.timeout(1e3);case 6:return e.next=8,fetch("https://api.cognitive.microsoft.com/bing/v7.0/suggestions?q="+t,{headers:{"Ocp-Apim-Subscription-Key":"295892d4ab4649d5b99cf93f690c076b"}});case 8:return n=e.sent,e.next=11,n.json();case 11:return o=e.sent,e.next=14,this.autosuggestArray(o,t);case 14:return a=e.sent,e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateNewsSource",value:function(e){this.setState({checked:"guardian"!==e,navbarExpanded:!1}),this.props.updateNewsSource(e)}},{key:"handleSubmitSearch",value:function(e){13==e.keyCode&&(console.log(e.target.value),console.log("form submitted!!!",e),this.renderSearchPage(e.target.value),this.setState({searchValue:{value:e.target.value,label:e.target.value}}))}},{key:"handleSubmitSearchClick",value:function(e){window.event;console.log("form submitted!!!!",e.value),this.renderSearchPage(e.value),this.setState({searchValue:{value:e.value,label:e.value}})}},{key:"renderSearchPage",value:function(e){this.props.history.push("/search/"+e)}},{key:"updateWhichPage",value:function(e,t){console.log(t),this.props.updateWhichPage(t),this.setState({navbarExpanded:!1}),"search"!==t&&(console.log("setting search 2 null!"),this.setState({searchValue:null}))}},{key:"styleLink",value:function(e){return e.includes(this.props.whichPage)?"selectedNav":"unselectedNav"}},{key:"renderToggleNewsSources",value:function(){var e=this;return new Set(["home/","world/","politics/","business/","technology/","sports/","sport/"]).has(this.state.selectedPage)?o.a.createElement("div",{className:"toggleDiv"},o.a.createElement("div",{className:"toggleNewsContainer"},o.a.createElement("p",{className:"newsSourceLabel"},"NYTimes")),o.a.createElement("label",{className:"toggleSwitch"},o.a.createElement("input",{type:"checkbox",onClick:function(){return e.updateNewsSource(e.state.source)},value:this.state.source,checked:this.state.checked}),o.a.createElement("span",{className:"toggleSlider"})),o.a.createElement("div",{className:"toggleNewsContainer"},o.a.createElement("p",{className:"newsSourceLabel"},"Guardian"))):void 0}},{key:"render",value:function(){var e=this,t=this.state.searchValue;console.log(t);var a=this.state,n=(a.source,a.searchDropdown,a.currentSearchValue),s=(a.selectedPage,o.a.createElement(E.b,null));return"bookmark"===this.props.whichPage&&(s=o.a.createElement(E.a,null)),o.a.createElement(b.a,{collapseOnSelect:!0,expand:"md",className:"nav-bg-gradient",bg:"dark",variant:"dark",fixed:"top",expanded:this.state.navbarExpanded},o.a.createElement(f.a,{cacheOptions:!0,defaultOptions:n,loadOptions:S.a.debounce(this.autosuggest,1500,{leading:!0}),placeholder:"Enter keyword...",classNamePrefix:"navbarSearch",className:"navbarSearch",isSearchable:!0,onChange:this.handleSubmitSearchClick,onKeyDown:this.handleSubmitSearch,value:this.state.searchValue}),o.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav",onClick:this.toggleNavbarExpanded}),o.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},o.a.createElement(k.a,{className:"mr-auto"},o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"home/")},className:this.styleLink("home/")},o.a.createElement(v.b,{to:"/home"},"Home")),o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"world/")},className:this.styleLink("world/")},o.a.createElement(v.b,{to:"/world"},"World")),o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"politics/")},className:this.styleLink("politics/")},o.a.createElement(v.b,{to:"/politics"},"Politics")),o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"business/")},className:this.styleLink("business/")},o.a.createElement(v.b,{to:"/business"},"Business")),o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"technology/")},className:this.styleLink("technology/")},o.a.createElement(v.b,{to:"/technology"},"Technology")),o.a.createElement(k.a.Link,{onClick:function(t){return e.updateWhichPage(t,"sports/")},className:this.styleLink("sports/")},o.a.createElement(v.b,{to:"/sports"},"Sports"))),o.a.createElement("div",{className:"navbarBookmark"},o.a.createElement("a",{href:"/bookmarks"},o.a.createElement("button",{onClick:function(){return e.toggleBookmark()}},s))),this.renderToggleNewsSources()))}}]),t}(n.Component),C=Object(w.f)(P),N=a(37),j=a.n(N),O=a(14),L=a(59),D=a(127),T=a(128),B=a(129),I=a(130),x=a(131),A=a(132),W=a(60),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={title:a.props.modalTitle,body:a.props.modalBody,url:a.props.url,show:a.props.show,key:a.props.key1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&this.setState({show:this.props.show})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.url,n=e.show,s=e.key;return o.a.createElement(W.a,{key:s,show:n,onHide:this.props.onHide,style:{opacity:1}},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,null,t)),o.a.createElement(W.a.Body,null,o.a.createElement("p",null,"Share via"),o.a.createElement("ul",{className:"socialIcons"},o.a.createElement("li",null,o.a.createElement(D.a,{url:a,hashtag:"#CSCI_571_NewsApp"},o.a.createElement(T.a,{round:!0}))),o.a.createElement("li",null,o.a.createElement(B.a,{url:a,hashtags:["CSCI_571_NewsApp"]},o.a.createElement(I.a,{round:!0}))),o.a.createElement("li",null,o.a.createElement(x.a,{url:a,subject:"#CSCI_571_NewsApp"},o.a.createElement(A.a,{round:!0}))))))}}]),t}(n.Component),H=a(89),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={key:a.props.key1,img:a.props.img,title:a.props.title,description:a.props.description,date:a.props.date,section:a.props.section,buttonName:a.props.buttonName,source:a.props.source,url:a.props.url,appPath:a.props.reactAppUrl,modalShow:!1,className:a.props.className?a.props.className:""},a.toggleShow=a.toggleShow.bind(Object(d.a)(a)),a.removeBookmark=a.removeBookmark.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"toggleShow",value:function(){var e=this.state.modalShow;this.setState({modalShow:!e})}},{key:"removeBookmark",value:function(e){this.props.removeBookmarkProps(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.key,n=t.img,s=t.title,r=t.description,c=t.date,l=t.section,i=t.buttonName,u=t.url,d=t.modalShow,h=t.appPath,p=t.className;t.source;return"bookmarkCard"===p?o.a.createElement(O.a,{key:a,className:p},o.a.createElement(O.a.Title,null,o.a.createElement("div",{className:"cardTitleText"},o.a.createElement(v.b,{to:h},s)),o.a.createElement("div",{className:"cardTitleButtons"},o.a.createElement("a",{onClick:this.toggleShow},o.a.createElement(E.c,null)),o.a.createElement(_,{key1:a+"-modal",show:d,onHide:this.toggleShow,url:u,modalTitle:s}),o.a.createElement("a",{className:"trashIcon",onClick:function(){return e.removeBookmark(h.substr(1))}},o.a.createElement(H.a,{className:"trashIcon"})))),o.a.createElement(v.b,{to:h},o.a.createElement(O.a.Img,{src:n})),o.a.createElement(O.a.Body,null,o.a.createElement(v.b,{to:h},o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"newsDate"},o.a.createElement(v.b,{to:h},c)),o.a.createElement("div",{className:"cardButtons"},o.a.createElement(L.a,{className:i[0]},l[0]),o.a.createElement(L.a,{className:i[1]},l[1])))))):"searchResultCard"===p?o.a.createElement(O.a,{key:a,className:p},o.a.createElement(O.a.Title,null,o.a.createElement("div",{className:"cardTitleText"},o.a.createElement(v.b,{to:"../"+h},s)),o.a.createElement("div",{className:"cardTitleButtons"},o.a.createElement("a",{onClick:this.toggleShow},o.a.createElement(E.c,null)),o.a.createElement(_,{key1:a+"-modal",show:d,onHide:this.toggleShow,url:u,modalTitle:s}))),o.a.createElement(v.b,{to:"../"+h},o.a.createElement(O.a.Img,{src:n})),o.a.createElement(O.a.Body,null,o.a.createElement(v.b,{to:"../"+h},o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"newsDate"},o.a.createElement(v.b,{to:"../"+h},c)),o.a.createElement("div",{className:"cardButtons"},o.a.createElement(L.a,{className:i},l)))))):o.a.createElement(O.a,{key:a,className:p},o.a.createElement(v.b,{to:h},o.a.createElement(O.a.Img,{src:n})),o.a.createElement(O.a.Body,null,o.a.createElement(O.a.Title,null,o.a.createElement(v.b,{to:h},s),o.a.createElement("a",{onClick:this.toggleShow},o.a.createElement(E.c,null)),o.a.createElement(_,{key1:a+"-modal",show:d,onHide:this.toggleShow,url:u,modalTitle:s})),o.a.createElement(O.a.Body,null,o.a.createElement(v.b,{to:h},o.a.createElement("div",{className:"newsDescription"},r))),o.a.createElement(v.b,{to:h},o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"newsDate"},o.a.createElement(v.b,{to:h},c)),o.a.createElement(L.a,{className:i},l)))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={source:a.props.source,pageContent:a.props.pageContent,whichPage:a.props.whichPage,isLoaded:a.props.isLoaded},a.populatePage=a.populatePage.bind(Object(d.a)(a)),a.updatePageContent=a.updatePageContent.bind(Object(d.a)(a)),a.show=!1,a.toggleShow=a.toggleShow.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updatePageContent()}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.source!==e.source&&this.props.pageContent!==e.pageContent?this.setState({source:this.props.source,pageContent:this.props.pageContent,isLoaded:this.props.isLoaded,whichPage:this.props.whichPage}):this.props.isLoaded!==e.isLoaded?this.setState({isLoaded:!1},(function(){t.setState({source:t.props.source,pageContent:t.props.pageContent,isLoaded:t.props.isLoaded,whichPage:t.props.whichPage},(function(){return t.populatePage()}))})):this.props.whichPage!==e.whichPage&&this.setState({isLoaded:!1},(function(){t.setState({source:t.props.source,pageContent:t.props.pageContent,isLoaded:t.props.isLoaded,whichPage:t.props.whichPage},(function(){return t.populatePage()}))}))}},{key:"updatePageContent",value:function(){this.props.updatePageContent()}},{key:"toggleShow",value:function(){this.setState({modalShow:!0})}},{key:"populatePage",value:function(){var e=[],t=this.props.pageContent;if(console.log(t),"nyt"===this.props.source)for(var a=0;a<t.length;a++){var n="other-button";"world"!==t[a].section&&"politics"!==t[a].section&&"business"!==t[a].section&&"technology"!==t[a].section&&"sports"!==t[a].section&&"sport"!==t[a].section||(n=t[a].section+"-button");var s=t[a].multimedia,r="https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg";if(null!==s)for(var c=0;c<s.length;c++)if(s[c].width>=2e3){r=s[c].url;break}var l="/"+t[a].uri.substring(14);e.push(o.a.createElement(U,{key:a,key1:a,img:r,title:t[a].title,description:t[a].abstract,date:t[a].published_date.substring(0,10),section:t[a].section,buttonName:n,source:this.props.source,url:t[a].url,reactAppUrl:l}))}else for(var i=0;i<t.length;i++){var u="other-button";"world"!==t[i].sectionId&&"politics"!==t[i].sectionId&&"business"!==t[i].sectionId&&"technology"!==t[i].sectionId&&"sports"!==t[i].sectionId&&"sport"!==t[i].sectionId||(u=t[i].sectionId+"-button");var d=t[i].blocks.main?t[i].blocks.main.elements[0].assets:[],h=d.length,p="https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png";h>0&&(p=d[h-1].file);l="/"+t[i].pathId;e.push(o.a.createElement(U,{key:i,key1:i,img:p,title:t[i].webTitle,description:t[i].blocks.body[0].bodyTextSummary,date:t[i].webPublicationDate.substring(0,10),section:t[i].sectionId,buttonName:u,source:this.props.source,url:t[i].webUrl,reactAppUrl:l}))}return e}},{key:"render",value:function(){for(var e=this.state,t=e.pageContent,a=e.isLoaded;!this.props.isLoaded||null==t||this.props.isLoaded!==a;)return o.a.createElement("div",null,o.a.createElement(j.a,{color:"#243058"}),o.a.createElement("div",{className:"loading"},"Loading"));return o.a.createElement("div",{className:"homePage"},this.populatePage())}}]),t}(n.Component),R=a(34),M=a(35),V=a(71),G=a(40),z=(a(82),a(90)),F=a.n(z),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={id:a.props.id},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.removeCommentBox()}},{key:"componentDidMount",value:function(){var e=this.state.id;console.log(e),this.removeCommentBox=F()("5675072811433984-proj",{createBoxUrl:function(t,a){return console.log(t),a.search=e,a.hash=t,e}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"commentbox",id:this.state.id})}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={articlePath:a.props.match.params.pathId,isLoaded:!1,articleData:{},cardLengthClass:"card-truncated",descriptionLengthClass:"detailed-description-truncated",button:o.a.createElement(V.a,null),bookmark:o.a.createElement(E.b,null),bookmarkStatus:!1,host:a.props.host},a.populatePage=a.populatePage.bind(Object(d.a)(a)),a.toggleArticleLength=a.toggleArticleLength.bind(Object(d.a)(a)),a.toggleBookmark=a.toggleBookmark.bind(Object(d.a)(a)),a.updateWhichPage=a.updateWhichPage.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateWhichPage();var t=this.state.host+"detailedArticleInfo?id="+this.state.articlePath;console.log(t),fetch(t).then((function(e){return e.json()})).then((function(t){for(var a=0;a<localStorage.length;a++)localStorage.key(a)===e.state.articlePath&&(console.log(localStorage.key(a)),e.setState({bookmark:o.a.createElement(E.a,null),bookmarkStatus:!0}));console.log(t),e.setState({isLoaded:!0,articleData:t})}))}},{key:"updateWhichPage",value:function(){this.props.updateWhichPage()}},{key:"toggleArticleLength",value:function(){"card-truncated"===this.state.cardLengthClass?this.setState({cardLengthClass:"card-long",descriptionLengthClass:"detailed-description-long",button:o.a.createElement(V.b,null)},(function(){return console.log("CHANGED TO CARD LONG")})):this.setState({cardLengthClass:"card-truncated",descriptionLengthClass:"detailed-description-truncated",button:o.a.createElement(V.a,null)})}},{key:"toggleBookmark",value:function(e,t){var a="guardian"===t?e.webTitle:e.headline.main;!1===this.state.bookmarkStatus?(this.setState({bookmark:o.a.createElement(E.a,null),bookmarkStatus:!0},(function(){return Object(G.b)("Saving "+a)})),localStorage.setItem(this.state.articlePath,JSON.stringify({data:e,source:t}))):(this.setState({bookmark:o.a.createElement(E.b,null),bookmarkStatus:!1},(function(){return Object(G.b)("Removing "+a)})),localStorage.removeItem(this.state.articlePath))}},{key:"populatePage",value:function(e,t){var a=this,n=[],s="",r="",c=[],l="",i="",u="",d={year:"numeric",month:"long",day:"numeric"};if("guardian"===t)return s=e.webTitle,r=new Date(Date.parse(e.webPublicationDate)),c=e.blocks.main?e.blocks.main.elements[0].assets:[],l="https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png",u=e.webUrl,console.log(u),c.length>0&&(l=c[c.length-1].file),i=e.blocks.body[0].bodyHtml,n.push(o.a.createElement(O.a.Title,{key:"1"},s)),n.push(o.a.createElement(O.a.Body,{key:"2"},o.a.createElement("div",{className:"detailedCardHeader"},o.a.createElement("p",null,r.toLocaleDateString("en-US",d)),o.a.createElement("div",{className:"socialIcons"},o.a.createElement(M.a,{key:"emailTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Email")},o.a.createElement(x.a,{url:u,subject:"#CSCI_571_NewsApp"},o.a.createElement(A.a,{size:18,round:!0}))),o.a.createElement(M.a,{key:"twitterTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Twitter")},o.a.createElement(B.a,{url:u,hashtags:["CSCI_571_NewsApp"]},o.a.createElement(I.a,{size:18,round:!0}))),o.a.createElement(M.a,{key:"fbTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Facebook")},o.a.createElement(D.a,{url:u,hashtag:"#CSCI_571_NewsApp"},o.a.createElement(T.a,{size:18,round:!0})))),o.a.createElement("div",{className:"bookmark"},o.a.createElement(M.a,{key:"bookmarkTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Bookmark")},o.a.createElement("button",{onClick:function(){return a.toggleBookmark(e,t)}},this.state.bookmark)),o.a.createElement(G.a,{hideProgressBar:!0,autoClose:1500,animation:"fade",position:"top-center"}))),o.a.createElement("div",{className:"img-and-details"},o.a.createElement("div",{className:"card-image"},o.a.createElement("img",{src:l,alt:""})),o.a.createElement("div",{className:this.state.descriptionLengthClass,dangerouslySetInnerHTML:{__html:i}}),o.a.createElement("button",{className:"detailedArticleButton",onClick:function(){return a.toggleArticleLength()}},this.state.button)))),n;s=(e=e[0]).headline.main,r=new Date(Date.parse(e.pub_date)),c=e.multimedia,l="https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg";for(var h=0;h<c.length;h++)if(c[h].width>=2e3){l="https://nytimes.com/"+c[h].url;break}return i=e.abstract,u=e.web_url,n.push(o.a.createElement(O.a.Title,null,s)),n.push(o.a.createElement(O.a.Body,null,o.a.createElement("div",{className:"detailedCardHeader"},o.a.createElement("p",null,r.toLocaleDateString("en-US",d)),o.a.createElement("div",{className:"socialIcons"},o.a.createElement(M.a,{key:"emailTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Email")},o.a.createElement(x.a,{url:u,subject:"#CSCI_571_NewsApp"},o.a.createElement(A.a,{size:18,round:!0}))),o.a.createElement(M.a,{key:"twitterTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Twitter")},o.a.createElement(B.a,{url:u,hashtags:["CSCI_571_NewsApp"]},o.a.createElement(I.a,{size:18,round:!0}))),o.a.createElement(M.a,{key:"fbTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Facebook")},o.a.createElement(D.a,{url:u,hashtag:"#CSCI_571_NewsApp"},o.a.createElement(T.a,{size:18,round:!0})))),o.a.createElement("div",{className:"bookmark"},o.a.createElement(M.a,{key:"bookmarkTooltip",placement:"top",overlay:o.a.createElement(R.a,{id:"tooltip-top"},"Bookmark")},o.a.createElement("button",{onClick:function(){return a.toggleBookmark(e,t)}},this.state.bookmark)),o.a.createElement(G.a,{hideProgressBar:!0,autoClose:1500,position:"top-center",animation:"fade"}))),o.a.createElement("div",{className:"img-and-details"},o.a.createElement("div",{className:"card-image"},o.a.createElement("img",{src:l})),o.a.createElement("div",{className:this.state.descriptionLengthClass,dangerouslySetInnerHTML:{__html:i}})))),console.log(e),n}},{key:"render",value:function(){for(;!this.state.isLoaded;)return o.a.createElement("div",null,o.a.createElement(j.a,{color:"#243058"}),o.a.createElement("div",{className:"loading"},"Loading"));var e=this.state,t=e.articlePath,a=e.cardLengthClass,n=e.articleData;console.log(n);var s=n.webUrl?"guardian":"nyt";return o.a.createElement("div",null,o.a.createElement("div",{className:"detailedPage"},o.a.createElement(O.a,{key:t,className:a},this.populatePage(n,s)),o.a.createElement(J,{id:this.state.articlePath})))}}]),t}(n.Component),Y=new Set(["world","politics","business","technology","sports"]),$=new Set(["world","politics","business","technology","sport"]),Q=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));for(var n=[],o=0;o<localStorage.length;o++)n.push(localStorage.key(o));return a.state={localStorage:n,cards:[],cardIds:[],isLoaded:!1},a.renderBookmarkCards=a.renderBookmarkCards.bind(Object(d.a)(a)),a.updateLocalStorage=a.updateLocalStorage.bind(Object(d.a)(a)),a.updateWhichPage=a.updateWhichPage.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateWhichPage",value:function(){this.props.updateWhichPage("bookmark")}},{key:"updateLocalStorage",value:function(e){console.log("updating local storage...");var t=[],a="",n=JSON.parse(localStorage.getItem(e));"nyt"===n.source?(console.log(n),a=n.data.headline.main):a=n.data.webTitle,localStorage.removeItem(e);for(var o=this.state.cards,s=this.state.cardIds,r=0;r<this.state.cardIds.length;r++)this.state.cardIds[r]===e&&(o.splice(r,1),s.splice(r,1));for(var c=0;c<localStorage.length;c++)t.push(localStorage.key(c));this.setState({localStorage:t,cards:o,cardIds:s},(function(){Object(G.b)("Removing "+a)}))}},{key:"renderBookmarkCards",value:function(){for(var e=this,t=[],a=[],n=(this.state.localStorage,0);n<localStorage.length;n++){console.log("render bookmark cards",localStorage.key(n));var s=JSON.parse(localStorage.getItem(localStorage.key(n))),r=s.source;s=s.data;var c="",l="",i="",u="/"+localStorage.key(n),d="",h="",p="",m=[];if(console.log("BOOKMARKED",s),"nyt"===r){var g=s.multimedia;if(c="https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg",null!==g)for(var b=0;b<g.length;b++)if(g[b].width>=2e3){c="http://nytimes.com/"+g[b].url;break}console.log(s),i=s.headline.main,p=["NYTimes",s.section_name],h=s.pub_date.substring(0,10),l=s.web_url,d=s.abstract,m.push("nyt-button"),Y.has(p[1].toLowerCase())?m.push(p+"-button"):m.push("other-button"),a.push(u.substr(1)),t.push(o.a.createElement(U,{key:n,key1:n,img:c,title:i,description:d,date:h,section:p,buttonName:m,source:"nyt",url:l,reactAppUrl:u,className:"bookmarkCard",removeBookmarkProps:this.updateLocalStorage}))}else{var k=s.blocks.main?s.blocks.main.elements[0].assets:[],v=k.length;c="https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png",v>0&&(c=k[v-1].file),p=s.sectionId,d=s.blocks.body[0].bodyTextSummary,h=s.webPublicationDate.substring(0,10),i=s.webTitle,r="guardian",l=s.webUrl,m.push("guardian-button"),$.has(p.toLowerCase())?m.push(p+"-button"):m.push("other-button"),a.push(u.substr(1)),t.push(o.a.createElement(U,{key:n,key1:n,img:c,title:i,description:d,date:h,section:["Guardian",p],source:"guardian",url:l,buttonName:m,reactAppUrl:u,className:"bookmarkCard",removeBookmarkProps:this.updateLocalStorage}))}}this.setState({cards:t,cardIds:a,isLoaded:!1},(function(){e.setState({isLoaded:!0})}))}},{key:"componentDidMount",value:function(){return this.updateWhichPage(),this.renderBookmarkCards()}},{key:"render",value:function(){for(var e=this.state,t=e.cards,a=e.isLoaded;!a;)return o.a.createElement("div",null,o.a.createElement(j.a,{color:"#243058"}),o.a.createElement("div",{className:"loading"},"Loading"));return o.a.createElement("div",{className:"bookmarkPageHeader"},o.a.createElement("h2",null,"Favorites"),o.a.createElement(G.a,{hideProgressBar:!0,autoClose:1500,animation:"fade",position:"top-center"}),o.a.createElement("div",{className:"bookmarkCards"},t))}}]),t}(n.Component),X=new Set(["world","politics","business","technology","sports"]),Z=new Set(["world","politics","business","technology","sport"]),ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={query:a.props.match.params.query,host:a.props.host,nytData:[],guardianData:[],cards:[],isLoaded:!1},a.renderSearchCards=a.renderSearchCards.bind(Object(d.a)(a)),a.updateWhichPage=a.updateWhichPage.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderSearchCards",value:function(){for(var e=this,t=this.state.nytData,a=this.state.guardianData,n="",s="",r="",c="",l="",i="",u="",d=[],h=0;h<t.length;h++){r=t[h].headline.main,""!==(i=t[h].news_desk)&&null!==i&&i||(i="none"),l=t[h].pub_date.substring(0,10),n="https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg";for(var p=0;p<t[h].multimedia.length;p++){var m=t[h].multimedia;m[p].width>=2e3&&(n="http://nytimes.com/"+m[p].url)}s=t[h].web_url,c=t[h].pathId,u="other-button",X.has(i.toLowerCase())&&(u=i+"-button"),d.push(o.a.createElement(U,{key:2*h,key1:2*h,img:n,title:r,description:"",date:l,section:i,buttonName:u,source:"nyt",url:s,reactAppUrl:c,className:"searchResultCard"}))}for(var g=0;g<a.length;g++){r=a[g].webTitle,""===(i=a[g].sectionId)&&(i="none"),l=a[g].webPublicationDate.substring(0,10),s=a[g].webUrl,c=a[g].pathId,u="other-button",Z.has(i.toLowerCase())&&(u=i+"-button"),n="https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png";var b=a[g].blocks.main?a[g].blocks.main.elements[0].assets:[],k=b.length;k>0&&(n=b[k-1].file),d.push(o.a.createElement(U,{key:2*g+1,key1:2*g+1,img:n,title:r,description:"",date:l,section:i,buttonName:u,source:"guardian",url:s,reactAppUrl:c,className:"searchResultCard"}))}this.setState({cards:d,isLoaded:!0},(function(){return console.log(e.state.cards)}))}},{key:"updateWhichPage",value:function(){this.props.updateWhichPage("search")}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.match.params.query!==e.match.params.query&&this.setState({query:this.props.match.params.query,isLoaded:!1},(function(){var e=t.state.host+"searchResults?query="+t.props.match.params.query;fetch(e).then((function(e){return e.json()})).then((function(e){t.setState({nytData:e.nytData,guardianData:e.guardianData},(function(){return t.renderSearchCards()}))}))}))}},{key:"componentDidMount",value:function(){var e=this;this.updateWhichPage();var t=this.state.host+"searchResults?query="+this.state.query;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({nytData:t.nytData,guardianData:t.guardianData},(function(){return e.renderSearchCards()}))}))}},{key:"render",value:function(){for(var e=this.state,t=(e.query,e.host,e.cards),a=e.isLoaded;!a;)return o.a.createElement("div",null,o.a.createElement(j.a,{color:"#243058"}),o.a.createElement("div",{className:"loading"},"Loading"));return o.a.createElement("div",{className:"searchPageResults"},o.a.createElement("h2",null,"Results"),o.a.createElement("div",{className:"searchResultCards"},t))}}]),t}(n.Component),te=0,ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={whichPage:"home/",source:"guardian",isLoaded:!1,pageContent:[],apiHost:"http://kxue-nodejs.us-east-1.elasticbeanstalk.com/",routes:[]},a.updateNewsSource=a.updateNewsSource.bind(Object(d.a)(a)),a.updatePageContent=a.updatePageContent.bind(Object(d.a)(a)),a.renderPage=a.renderPage.bind(Object(d.a)(a)),a.updateWhichPage=a.updateWhichPage.bind(Object(d.a)(a)),a.populateArticleUrls=a.populateArticleUrls.bind(Object(d.a)(a)),a.getPageContentForComponent=a.getPageContentForComponent.bind(Object(d.a)(a)),a.validateSwitchedPages=a.validateSwitchedPages.bind(Object(d.a)(a)),a.updateNonHomePage=a.updateNonHomePage.bind(Object(d.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateWhichPage",value:function(e){var t=this;"guardian"===this.state.source&&"sports/"===e?e="sport/":"nyt"===this.state.source&&"sport/"===e&&(e="sports/");var a=this.state.apiHost+e;this.setState({isLoaded:!1}),fetch(a+this.state.source).then((function(e){return e.json()})).then((function(a){t.setState({whichPage:e,pageContent:a.results,isLoaded:!1},(function(){return t.validateSwitchedPages(e,a.results)}))}))}},{key:"updateNonHomePage",value:function(e){var t=this;this.setState({whichPage:e},(function(){console.log(t.state.whichPage)}))}},{key:"validateSwitchedPages",value:function(e,t){for(console.log("in validate switched pages");this.state.whichPage!==e||this.state.pageContent!==t;);this.setState({whichPage:e,pageContent:t,isLoaded:!0},(function(){return console.log("DONE")}))}},{key:"updateNewsSource",value:function(e){var t=this,a="nyt"===e?"guardian":"nyt",n=this.state.whichPage;"guardian"===a&&"sports/"===n?n="sport/":"nyt"===a&&"sport/"===n&&(n="sports/");var o=this.state.apiHost+n;this.setState({isLoaded:!1}),fetch(o+a).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({pageContent:e.results,isLoaded:!0,source:a,whichPage:n})}))}},{key:"populateArticleUrls",value:function(){for(var e=this,t=[],a=["home","world","politics","technology","business","sports"],n=function(n){t.push(o.a.createElement(w.a,{exact:!0,path:"/"+a[n],key:te,render:function(t){return o.a.createElement(q,Object.assign({},t,{source:e.state.source,whichPage:a[n],isLoaded:e.state.isLoaded,pageContent:e.state.pageContent,updatePageContent:e.updatePageContent}))}})),te++},s=0;s<a.length;s++)n(s);t.push(o.a.createElement(w.a,{exact:!0,path:"/bookmarks",key:te,render:function(t){return o.a.createElement(Q,Object.assign({},t,{updateWhichPage:e.updateNonHomePage}))}})),te++,t.push(o.a.createElement(w.a,{exact:!0,path:"/search/:query",key:te,render:function(t){return o.a.createElement(ee,Object.assign({},t,{host:e.state.apiHost,updateWhichPage:e.updateNonHomePage}))}})),t.push(o.a.createElement(w.a,{exact:!0,path:"/:pathId",key:te,render:function(t){return o.a.createElement(K,Object.assign({},t,{host:e.state.apiHost,updateWhichPage:e.updateNonHomePage}))}})),te++,this.setState({routes:t})}},{key:"updatePageContent",value:function(){var e=this,t=this.state.apiHost+this.state.whichPage;fetch(t+this.state.source).then((function(e){return e.json()})).then((function(t){e.setState({pageContent:t.results,isLoaded:!0})}))}},{key:"getPageContentForComponent",value:function(e,t){var a=this.state.apiHost+t+"/",n=[];return fetch(a+e).then((function(e){return e.json()})).then((function(e){n=e.results,console.log(n)})),n}},{key:"renderPage",value:function(){return o.a.createElement(q,{source:this.state.source,isLoaded:this.state.isLoaded,pageContent:this.state.pageContent,updatePageContent:this.updatePageContent})}},{key:"componentDidMount",value:function(){this.populateArticleUrls()}},{key:"render",value:function(){var e=this.state.routes;return o.a.createElement("div",{id:"App"},o.a.createElement(v.a,null,o.a.createElement(C,{source:this.state.source,updateNewsSource:this.updateNewsSource,whichPage:this.state.whichPage,updateWhichPage:this.updateWhichPage}),o.a.createElement(w.c,null,e)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t,a){e.exports=a(118)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.6753c3c4.chunk.js.map